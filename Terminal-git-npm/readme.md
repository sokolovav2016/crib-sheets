# Шпаргалка по Terminal | Git | npm

*   [Terminal](https://github.com/sokolovav2016/crib-sheets/tree/master/terminal-and-git#Terminal)
*   [Git](https://github.com/sokolovav2016/crib-sheets/tree/master/terminal-and-git#Git)
*   [npm](https://github.com/sokolovav2016/crib-sheets/tree/master/terminal-and-git#npm)


## Terminal

### Информация о содержимом папки

``` bash
pwd     # путь к текущей директории

ls      # показывает содержимое текущей папки
ls -1   # показывает содержимое текущей папки столбиком
ls -a   # показывает содержимое текущей папки, в том числе скрытые файлы
ls -l   # полный вывод информации
ls /**  # показывает содержимое папки директории (** - название папки)
ls ~/** # показывает содержимое любой папки (** - название папки)
```


### Переходы между папками

``` bash
cd        # переход в корневую директорию
cd **     # переход в директорию (** - название папки)
cd/**/ ** # переход в поддиректорию (** - название папки)
cd ..     # подняться на уровень выше (cd ../../ - еще на уровень выше)
cd -      # вернуться назад
```


### Прочее

``` bash
open .   # открытие текущей директории
mkdir ** # создание директории (** - название папки)
touch ** # создание файла (** - название файла, н-р: touch index.html)
cat **   # вывод информации из файла в консоль (** - название файла)
```

## Git

### Настройка

``` bash
git config --global user.name "**"  # настройка имени (** - имя)
git config --global user.email "**" # настройка email (** - email)
git config --list                   # проверка всех настроек

git help ** # справка по команде (** - название команды, н-р: git help checkout)
```


### Создание репозитория и действия с коммитами

``` bash
git init   # создает репозиторий в текущем каталоге
git status # текущее состояние репозитория

git add ** # индексирует файл (** - название файла, н-р: git add index.html)
git add .  # индексирует все изменения

git reset HEAD ** # отмена индексации файла (** - название файла)
git reset         # отменяет все незафиксированные изменения
git reset --hard  # безвозвратно удаляет незафиксированные текущие изменения из локального репозитория и из индекса

git commit -m "**"           # создает коммит (** - название коммита, н-р: git commit -m "First Commit")
git commit -a -m "**"        # то же что и выше, но автоматически индексирует измененный файл (не работает при удалении/добавлении файла)
git commit --amend -m "**"   # меняет название последнего коммита (** - название коммита)
git commit --amend --no-edit # меняет последний коммит (н-р, удаляет из коммита файл если было применено git rm **)

// возврат к состоянию последнего коммита:
git checkout **    # отмена изменений в не проиндексированном файле (** - имя файла)
git checkout **    # возврат удаленного не проиндексированного файла (** - имя файла, путь к файлу)
git checkout ** ** # возврат файла к состоянию последнего коммита (** - идентификатор комитта, ** - путь к файлу, имя файла)
git checkout **    # возврат к конкретному коммиту (** - идентификатор коммита)

git rm **          # удаляет файл из папки (** - название файла, для внесения изменений в коммит выполнить: git commit --amend --no-edit)
git rm --cached ** # удаляет файл из последнего коммита, но оставляет его в папке (** - название файла, для внесения изменений в коммит выполнить: git commit --amend --no-edit)
```


### Информация о коммитах

``` bash
git diff          # показывает непроиндексированные изменения
git diff --staged # показывает проиндексированные изменения

git log                         # показывает историю коммитов
git log -1                      # показывает последний коммит
git log --oneline               # история коммитов списком
git log --oneline --all         # вся история коммитов списком
git log --oneline --all --graph # вся история коммитов схемой

git show ** # просмотреть изменения в коммите (** - идентификатор коммита)

git cat-file -p ** # просмотреть информацию о коммите (** - идентификатор коммита)
```


### Работа с ветками и конфликты

``` bash
git branch       # все существующие ветки локального репозитория
git branch -r    # все существующие ветки удалённого репозитория
git branch -m ** # переименовывает ветку (** - новое имя текущей ветки)

git checkout -b **    # создает новую ветку и переключается на нее (** - название ветки)
git checkout -b ** ** # создает новую ветку и определяет точку начала (** - название ветки, ** - идентификатор коммита)
git checkout **       # переключение на ветку (** - название ветки, н-р: git checkout master)

git merge ** -m "**"   # слияние веток (** - название ветки с которой будет происходить слияние, ** - название слияния)
git branch --delete ** # удаление ветки (** - название ветки)
```

При конфликте слияния:
- Разные изменения одинаковых строк - отредактировать файл в котором произошел конфликт (удалить лишние данные и оставить необходимые), сохранить изменения в файле, проиндексировать, сделать коммит.
- В одной ветке файл изменен, в другой удален - два варианта: 1. Оставить файл - git  add <имя фала>. 2. Удалить файл - git rm <имя файла>. Далее закоммитить изменения.


### Работа с удаленным репозиторием

``` bash
git remote add origin ** # связывает с удаленным репозиторием (origin - имя репозитория, ** - путь к репозиторию)
git remote -v            # показывает связь с удаленными репозиториями

git clone ** # клонирование удаленного репозитория (** - путь к репозиторию)

git push origin **    # отправка изменений в удаленный репозиторий, в том числе возможна новая ветка (origin - имя удаленного репозитория, ** - имя ветки удаленного репозитория)
git push -u origin ** # то же что и выше, (-u - устанавливает связь между локальной веткой и удаленной)

git pull origin **           # получение изменений из удаленного репозитория (и слияние с локальным) (origin - имя удаленного репозитория, ** - имя ветки удаленного репозитория)
git fetch origin             # получение коммитов и веток из удаленного репозитория в локальный (без слияния с локальным)
git checkout -b ** origin/** # создание ветки (**) и перенос указателя полученного выше на полученную ветку (**)

// Переименование удаленной ветки:
git push origin **:** # push локальной ветки в удаленную, с разными именами (** - имя локальной ветки, ** - имя удаленной ветки)
git push origin :**   # удаление удаленной ветки (** - имя удаленной ветки)
git branch -m **      # переименовывает ветку (** - новое имя текущей ветки)

git branch -v (или -vv)                # показывает какие локальные ветки связаны с удаленными
git branch --set-upstream-to=origin/** # связывает локальную ветку с удаленной (** - имя удаленной ветки), далее находясь в ветке достаточно писать git push / git pull и она будет синхронизироваться с удаленной веткой
```

Pull request делать на GitHub.
Правило: одна ветка - один Pull request!
Если для ветки Pull request уже был создан то новые коммиты автоматически подтянуться в Pull request.


### SSH

Перед началом переходим в папку гуд будут храниться ключи (по умолчанию ~/.ssh)

``` bash
ssh-keygen -t rsa -b 4096 -C "youremail@gmail.com" # генерация SSH ключа
ssh -T -i ** git@github.com                        # проверка доступа по SSH на GitHub (** - имя или путь/имя к приватному ключу)
```
После того как создан ключ, добавляем его на GitHub.
Далее в папке ~/.ssh прописываем в файле config связь ключа с доменом (что бы приватный ключ автоматически подставлялся):

``` bash
Host github.com
 IdentityFile ~/.ssh/mykey
```

``` bash
ssh -T git@github.com # проверка доступа без указания ключа
```

Если не генерируется ключ или не проходит проверку - перезагрузить терминал или комп.


### Обратное получение изменений из academy master

1. Связываем локальный репозиторий с удаленным master репозиторием (academy)
``` bash
git remote add academy ** # (academy - имя репозитория, ** - путь к репозиторию)
```
2. Переходим в локальный master репозиторий
``` bash
git checkout master
```
3. Забираем изменения из удаленного master репозитория academy в локальный master репозиторий
``` bash
git pull academy master # (academy - имя удаленного репозитория, master - имя ветки удаленного репозитория)
```
4. Отправляем изменения в свой удаленный master репозиторий
``` bash
git push origin master # (origin - имя удаленного репозитория, master - имя ветки удаленного репозитория)
```

## npm

### Установка и настройка Node и Gulp с нуля:

1. Установить Homebrew
2. Установить Node.js (brew install node)
3. Проверить и обновить npm (npm -v, npm update npm -g)
4. Установить Gulp глобально (npm install --global gulp-cli)
5. Создать package.json (npm init)
6. Установить Gulp локально, в текущий проект (npm install --save-dev gulp)
7. Создать gulpfile.js
8. Добавить в gulpfile.js все необходимые пакеты/зависимости (npm install --save-dev package)
9. !!! Запускать через npx - все что необходимо выполнять, но не отслеживать (н-р: конверт и оптимизация изображений, и прочее)


``` bash
node -h                 # показывает список всех доступных команд Node.js.
node -v, node --version # показывает установленную версию Node.js
```


### npm

``` bash
npm -h            # показывает список всех доступных команд пакетного менеджера (npm)
npm config ls -l  # выведет список всех возможных настроек

npm init # создает package.json, который определяет настройки проекта, зависимости, скрипты, название и прочее

npm -v, npm --version # показывает установленную версию npm
npm update npm -g     # обновляет версию npm

npm list --depth=0                   # показывает список установленных пакетов
npm outdated, npm outdated --depth=0 # показывает список установленных пакетов, которые требуют обновления
npm update --save                    # обновляет все пакеты npm до последней версии

npm install, npm i                 # устанавливает все пакеты и зависимости перечисленные в package.json
npm install package, npm i package # устанавливает любой пакет по его имени, если к команде добавить префикс -g пакет будет установлен глобально
npm install --global gulp-cli      # устанавливает Gulp глобально
npm install --save-dev gulp        # устанавливает Gulp в текущий проект (локально)
# префикс --save - устанавливает пакеты в package.json в раздел dependencies
# префикс --save-dev - устанавливает пакеты в package.json в раздел devDependencies

npm list package          # показывает версию установленного пакета
npm view package version  # показывает последнюю версию пакета, которая существует
npm update package        # обновляет установленный пакет по имени
npm install package@1.0.1 # устанавливает конкретную версию пакета
npm uninstall package     # удаляет установленный пакет по имени
```
